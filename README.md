# @guoyunhe/node-scripts

Scripts to build, lint and test Node.js projects.

Features:

- TypeScript
- esbuild
- ESLint
- Prettier
- Jest

## Options

### --help

Show help.

### --version

Show version.

## Configuration

Suggested configuration in `package.json`:

```json
{
  "files": ["dist", "CHANGELOG.md", "LICENSE", "README.md"],
  "main": "dist/index.js",
  "module": "dist/index.mjs",
  "typings": "dist/index.d.ts",
  "eslintConfig": {
    "extends": "@guoyunhe/node-scripts"
  },
  "jest": {
    "preset": "@guoyunhe/node-scripts"
  },
  "prettier": {
    "printWidth": 100,
    "singleQuote": true
  }
}
```

For CLI project, add `bin` to `package.json`:

```json
{
  "bin": {
    "my-cli": "dist/my-cli.js",
    "another-cli": "dist/another-cli.js"
  }
}
```

Suggested `.editorconfig`:

```ini
root = true

[*]
charset = utf-8
end_of_line = lf
indent_size = 2
indent_style = space
insert_final_newline = true
trim_trailing_whitespace = true
quote_type = single
```

## Commands

### build

Build CJS, ESM and TypeScript declaration (\*.d.ts).

```
node-scripts build
```

CJS and ESM builds are powered by esbuild, one of the fastest JavaScript complier and bundler.
TypeScript declarations are generated by TypeScript and bundled by API Extractor from Microsoft.

The build command read entry `src/index.ts`. CJS is output at `dist/index.js`. ESM is output at
`dist/index.mjs`. Declaration is output at `dist/index.d.ts`.

For CLI projects, it scans `src/bin/*.ts`. For example, `src/bin/my-cli.ts` outputs `dist/my-cli.js`
(CJS) and `dist/my-cli.mjs` (ESM).

Support watch mode with `--watch` option.

```
node-scripts build --watch
```

### watch

Watch mode. Same as `node-scripts build --watch`.

```
node-scripts watch
```

### lint

```
node-scripts format
```

Check your code with ESLint.

Support auto fix code issues with `--fix` option. (This will also run Prettier for formatting)

```
node-scripts lint --fix
```

### format

Format code and fix ESLint issues. Same as `node-scripts lint --fix`.

```
node-scripts format
```

### format

Format code and fix ESLint issues. Same as `node-scripts lint --fix`.

```
node-scripts format
```

### test

Run unit tests with Jest. Generate coverage report at `coverage`.

```
node-scripts test
```

Support all [Jest CLI options](https://jestjs.io/docs/cli). For example:

```bash
# Watch mode
node-scripts test --watchAll

# Update snapshots
node-scripts test -u
```
